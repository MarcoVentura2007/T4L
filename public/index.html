<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T4L | Sezioni</title>
    <link rel="icon" href="immagini/Icona.ico">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2B2B30">

    <script>
<<<<<<< HEAD
      const token = localStorage.getItem("token");

      if (!token) {
        // Se non c’è token, vai al login
        window.location.href = "login.html";
      } else {
        // Verifica lato server che il token sia valido
        fetch("/validate-token", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ token })
        })
        .then(res => {
          if (!res.ok) throw new Error("Token non valido");
          return res.json();
        })
        .then(data => {
          // Mostra l’username nella pagina
          document.getElementById("username-nav").textContent = data.username;
        })
        .catch(err => {
          // Token scaduto o non valido → ritorno al login
          localStorage.removeItem("token");
          window.location.href = "login.html";
        });
      }
=======
      const token = sessionStorage.getItem("token");
            if (!token) {
                window.location.href = "/login.html";
            }

            fetch("/verify-token?token=" + token)
                .then(r => r.text())
                .then(t => {
                    if (t !== "ok") {
                        sessionStorage.clear();
                        window.location.href = "/login.html";
                   }
        });
>>>>>>> 9870ab85662ab62bbe227d1f4a71acc866502e8a

    </script>
</head>
<body style="overflow: hidden;">
  
  <!-- NAVIGAZIONE -->
  <div id="navigazione">
    <div class="username">
        <a href="login.html"><img src="immagini/profile-picture.png" alt=""></a>
        <p><span id="username-nav"></span></p>
    </div>
    <div class="nav-wrapper">
        <img src="immagini/overlimits.png" alt="">

        <a href="index.html"><img src="immagini/TIME4ALL_LOGO-removebg-preview.png" alt=""></a>

        <img src="immagini/Logo-Cooperativa-Ergaterapeutica.png" alt="">
    </div>
  </div>

  <div class="contenuto-principale">
    <h1 class="titolo-principale">Scegli la sezione</h1>

    <div class="tow-columns">
        <div class="column">
            <a href="centrodiurno.html">
                <img src="immagini/Logo-centrodiurno.png" alt="">
            </a>
        </div>
        <div class="column">
            <a href="">
                <img src="immagini/Logo-Cooperativa-Ergaterapeutica.png" alt="">
            </a>
        </div>
    </div>
  </div>

  <script>
    
    const username_nav = document.getElementById("username-nav");
    username_nav.textContent = username;
  </script>

</body>
</html>